"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getItemRange = exports.PageSummary = void 0;

var _style = _interopRequireDefault(require("styled-jsx/style"));

var _propTypes = _interopRequireDefault(require("@dhis2/prop-types"));

var _uiConstants = require("@dhis2/ui-constants");

var _react = _interopRequireDefault(require("react"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// TODO: i18n translate
const translate = (prop, interpolationObject) => {
  if (typeof prop === 'function') {
    return prop(interpolationObject);
  }

  return prop;
};

const getItemRange = (page, pageSize, total) => {
  let firstItem, lastItem;

  if (total === 0) {
    // if no items are found, the pager total is 0
    // and we want to force the first and last item to be 0 too
    firstItem = 0;
    lastItem = 0;
  } else {
    // page is 1-based
    firstItem = (page - 1) * pageSize + 1;
    lastItem = firstItem + pageSize - 1;
  }

  if (lastItem > total) {
    lastItem = total;
  }

  return {
    firstItem,
    lastItem
  };
};

exports.getItemRange = getItemRange;

const PageSummary = ({
  dataTest,
  page,
  pageCount,
  pageSize,
  pageSummaryText,
  total
}) => {
  const {
    firstItem,
    lastItem
  } = getItemRange(page, pageSize, total);
  const summary = translate(pageSummaryText, {
    page,
    pageCount,
    firstItem,
    lastItem,
    total
  });
  return /*#__PURE__*/_react.default.createElement("div", {
    "data-test": `${dataTest}-summary`,
    className: _style.default.dynamic([["3931741314", [_uiConstants.spacers.dp12, _uiConstants.colors.grey700]]])
  }, /*#__PURE__*/_react.default.createElement("span", {
    className: _style.default.dynamic([["3931741314", [_uiConstants.spacers.dp12, _uiConstants.colors.grey700]]])
  }, summary), /*#__PURE__*/_react.default.createElement(_style.default, {
    id: "3931741314",
    dynamic: [_uiConstants.spacers.dp12, _uiConstants.colors.grey700]
  }, [`div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;min-height:32px;margin-right:${_uiConstants.spacers.dp12};}`, `span.__jsx-style-dynamic-selector{color:${_uiConstants.colors.grey700};font-size:14px;}`]));
};

exports.PageSummary = PageSummary;
PageSummary.propTypes = {
  dataTest: _propTypes.default.string.isRequired,
  page: _propTypes.default.number.isRequired,
  pageCount: _propTypes.default.number.isRequired,
  pageSize: _propTypes.default.number.isRequired,
  pageSummaryText: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.func]).isRequired,
  total: _propTypes.default.number.isRequired
};